const resources = {
  en: {
    translation: {
      // header
      "Home": "Home",
      "Projects": "Projects",
      "Contact Us": "Contact Us",

      // main
      "Get Started": "Get Started",
      "Servcies" : "Our Servcies",
      "Aero â€“ We Build Clean & Powerful Websites": "Aero â€“ We Build Clean & Powerful Websites",

      // footer
      "â€œDev team crafting clean digital work.â€": "â€œDev team crafting clean digital work.â€",
      "Privacy Policy": "Privacy Policy",
      "Terms of Service": "Terms of Service",
      "Cookie Policy": "Cookie Policy",
      "PROJECT": "PROJECTS",
      "OUR SERVICES": "OUR SERVICES",

      // contact
      "Let's get in touch": "Let's get in touch",
      "We would love to hear": "We would love to hear from you! You can reach out to us by clicking on any of the links below, or by filling out the forms on the right side of the page.",
      "Contact us": "Contact us",
      "Username": "Username",
      "Email": "Email",
      "Phone (optional)": "Phone (optional)",
      "Message": "Message",
      "Send": "Send",
      "Call": "Call",
      "Send mail": "Send mail!",

      // services
      "UI/UX Design": "UI/UX Design",
      "Designing innovative": "Designing innovative and engaging user interfaces that create memorable experiences and drive user engagement",
      "Web Development": "Web Development",
      "Building responsive": "Building responsive and scalable web applications using modern technologies and best practices",
      "Desktop App Development": "Desktop App Development",
      "Build fast, smart, and reliable": "Build fast, smart, and reliable desktop solutions tailored to your specific business needs",

      "Design": "Design",
      "Starter": "Starter",
      "Business": "Business",
      "Pro": "Pro",
      "Compare": "Compare",

      "What Our Clients Say" : "What Our Clients Say",
      "Great team, fast Work!" : "Great team, fast Work!" ,
      "Beautiful design & clean code." : "Beautiful design & clean code.",
      "Very professional and responsive." : "Very professional and responsive.",

      "We deliver cutting-edge" : "We deliver cutting-edge digital solutions tailored to your business needs",
    }
  },
  ar: {
    translation: {
      "Home": "Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",
      "Projects": "Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹",
      "Contact Us": "Ø§ØªØµÙ„ Ø¨Ù†Ø§",
      "Get Started": "Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù†",
      "Servcies" : "Ø®Ø¯Ù…Ø§ØªÙ†Ø§",
      "Aero â€“ We Build Clean & Powerful Websites": "Aero â€“ Ù†Ø¨Ù†ÙŠ Ù…ÙˆØ§Ù‚Ø¹ Ù†Ø¸ÙŠÙØ© ÙˆÙ‚ÙˆÙŠØ©",
      "â€œDev team crafting clean digital work.â€": "ÙØ±ÙŠÙ‚ Ø§Ù„ØªØ·ÙˆÙŠØ± ÙŠØµÙ†Ø¹ Ø£Ø¹Ù…Ø§Ù„ Ø±Ù‚Ù…ÙŠØ© Ù†Ø¸ÙŠÙØ©.",
      "Privacy Policy": "Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©",
      "Terms of Service": "Ø´Ø±ÙˆØ· Ø§Ù„Ø®Ø¯Ù…Ø©",
      "Cookie Policy": "Ø³ÙŠØ§Ø³Ø© Ø§Ù„ÙƒÙˆÙƒÙŠØ²",
      "PROJECT": "Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹",
      "OUR SERVICES": "Ø®Ø¯Ù…Ø§ØªÙ†Ø§",
      "Let's get in touch": "Ø¯Ø¹Ù†Ø§ Ù†ØªÙˆØ§ØµÙ„",
      "We would love to hear": "Ù†ÙˆØ¯ Ø£Ù† Ù†Ø³Ù…Ø¹ Ù…Ù†Ùƒ! ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø£ÙŠ Ù…Ù† Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø£Ø¯Ù†Ø§Ù‡ØŒ Ø£Ùˆ Ø¹Ù† Ø·Ø±ÙŠÙ‚ Ù…Ù„Ø¡ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø£ÙŠÙ…Ù† Ù…Ù† Ø§Ù„ØµÙØ­Ø©.",
      "Contact us": "Ø§ØªØµÙ„ Ø¨Ù†Ø§",
      "Username": "Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…",
      "Email": "Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",
      "Phone (optional)": "Ø§Ù„Ù‡Ø§ØªÙ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)",
      "Message": "Ø§Ù„Ø±Ø³Ø§Ù„Ø©",
      "Send": "Ø¥Ø±Ø³Ø§Ù„",
      "Call": "Ø§ØªØµÙ„",
      "Send mail": "Ø£Ø±Ø³Ù„ Ø¨Ø±ÙŠØ¯Ù‹Ø§!",
      "UI/UX Design": "ØªØµÙ…ÙŠÙ… ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…",
      "Designing innovative": "ØªØµÙ…ÙŠÙ… ÙˆØ§Ø¬Ù‡Ø§Øª Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø¨ØªÙƒØ±Ø© ÙˆØ¬Ø°Ø§Ø¨Ø©",
      "Web Development": "ØªØ·ÙˆÙŠØ± Ø§Ù„ÙˆÙŠØ¨",
      "Building responsive": "Ø¨Ù†Ø§Ø¡ ØªØ·Ø¨ÙŠÙ‚Ø§Øª ÙˆÙŠØ¨ Ù…ØªØ¬Ø§ÙˆØ¨Ø© ÙˆÙ‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªÙˆØ³Ø¹",
      "Desktop App Development": "ØªØ·ÙˆÙŠØ± ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø³Ø·Ø­ Ø§Ù„Ù…ÙƒØªØ¨",
      "Build fast, smart, and reliable": "Ø¨Ù†Ø§Ø¡ Ø­Ù„ÙˆÙ„ Ø³Ø·Ø­ Ù…ÙƒØªØ¨ Ø³Ø±ÙŠØ¹Ø© ÙˆØ°ÙƒÙŠØ© ÙˆÙ…ÙˆØ«ÙˆÙ‚Ø© Ù…ØµÙ…Ù…Ø© Ø­Ø³Ø¨ Ø§Ø­ØªÙŠØ§Ø¬Ø§ØªÙƒ",
      "Press here to see details": "Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ù„Ø±Ø¤ÙŠØ© Ø§Ù„ØªÙØ§ØµÙŠÙ„",
      "Design Only": "ØªØµÙ…ÙŠÙ… ÙÙ‚Ø·",
      "Starter": "Ø§Ù„Ù…Ø¨ØªØ¯Ø¦",
      "Business": "Ø§Ù„Ø£Ø¹Ù…Ø§Ù„",
      "Pro": "Ø§Ù„Ù…Ø­ØªØ±Ù",
      "Compare": "Ù‚Ø§Ø±Ù†",
      "What Our Clients Say" : "Ø§Ø±Ø§Ø¡ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ø³Ø§Ø¨Ù‚ÙˆÙ†",
      "Great team, fast Work!" : "Great team, fast Work!" ,
      "Beautiful design & clean code." : "Beautiful design & clean code.",
      "Very professional and responsive." :"Very professional and responsive.",
      "We deliver cutting-edge" : "Ù†Ù‚Ø¯Ù… Ø£Ø­Ø¯Ø« Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ø±Ù‚Ù…ÙŠØ© Ø§Ù„Ù…ØµÙ…Ù…Ø© Ø®ØµÙŠØµÙ‹Ø§ Ù„ØªÙ„Ø¨ÙŠØ© Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø£Ø¹Ù…Ø§Ù„Ùƒ"
    }
  }
};

// Change language function
function changeLang(lang) {
  i18next.changeLanguage(lang, () => {
    updateContent();
  });
  setFlag(lang);
  localStorage.setItem("lang", lang);
}

// Update content in page + iframes
function updateContent() {
  // Main document
  document.querySelectorAll("[data-i18n]").forEach(el => {
    const key = el.getAttribute("data-i18n");
    el.innerHTML = i18next.t(key);
  });

  // Inside iframes (same-origin only)
  document.querySelectorAll("iframe").forEach(frame => {
    try {
      const doc = frame.contentDocument || frame.contentWindow.document;
      if (doc) {
        doc.querySelectorAll("[data-i18n]").forEach(el => {
          const key = el.getAttribute("data-i18n");
          el.innerHTML = i18next.t(key);
        });
      }
    } catch (e) {
      console.warn("Cannot access iframe due to cross-origin:", frame.src);
    }
  });
}

// Flag setter
function setFlag(lang) {
  const langBtn = document.querySelector(".lang-btn");
  if (!langBtn) return;

  switch (lang) {
    case "ar":
      langBtn.innerHTML = "ðŸ‡ªðŸ‡¬ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© <span class='arrow'>â–¼</span>";
      break;
    case "en":
      langBtn.innerHTML = "ðŸ‡¬ðŸ‡§ English <span class='arrow'>â–¼</span>";
      break;
  }
}

// Init
document.addEventListener("DOMContentLoaded", () => {
  i18next.init({
    lng: localStorage.getItem("lang") || "en",
    debug: false,
    resources
  }, function () {
    updateContent();
    setFlag(i18next.language);
  });

  // Dropdown toggle
  const langSwitcher = document.querySelector('.language-switcher');
  const langBtn = document.querySelector('.lang-btn');
  const langMenu = document.querySelector('.lang-menu');

  if (langBtn && langMenu) {
    langBtn.addEventListener('click', () => {
      langSwitcher.classList.toggle('active');
    });

    langMenu.querySelectorAll("li").forEach(li => {
      li.addEventListener("click", () => {
        const newLang = li.getAttribute("data-lang");
        changeLang(newLang);
        langSwitcher.classList.remove("active");
      });
    });
  }

  // Make sure iframes update when they load
  document.querySelectorAll("iframe").forEach(frame => {
    frame.addEventListener("load", () => {
      updateContent();
    });
  });
});
